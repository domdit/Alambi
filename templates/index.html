{% extends "layout.html" %}
{% block script %}
{% endblock %}
{% block main %}
<main>

    <div class="container">

        <div class="row">

            {% if sidebar_settings.main_position == 1 %}

            <div class="col-md-4">
                {% include 'sidebar.html' %}

            </div>

            {% endif %}


            <div class="{{ 'col-md-12' if sidebar_settings.main_position == 3 else 'col-md-8' }}">
                {% for post in posts.items %}
                <div class="blog-post-container border rounded mb-3">

                    {% if post.sticky %}
                        <i alt="pinned" class="fas fa-thumbtack float-right" style="color:var(--accent-color)"></i>
                    {% endif %}

                    <a href="{{url_for('post', post_id=post.blog_id)}}">
                        <h1>{{post.name|safe}}</h1>
                    </a>
                    <small>
                        {{post.date.strftime('%m/%d/%Y %I:%M')|safe}} By {{general_settings.author}}
                    </small>

                    <!--link to edit and delete-->
                    <hr>
                    <p class="{{ 'excerpt' if general_settings.excerpt else ' '}}">
                        {{post.text|safe}}
                    </p>

                        {% if general_settings.excerpt %}
                            <center>
                                <a href="{{url_for('post', post_id=post.blog_id)}}" class="mt-1">Continue Reading...</a><br>
                            </center>
                        {% endif %}


                    <small>
                        <b>Category</b>:
                            <a href="{{url_for('query', term=post.category)}}">{{post.category}}</a><br>

                            <b>Tags:</b>
                                {% for tag in post.tags %}
                                    <a href="{{url_for('query', term=tag.name)}}">{{tag.name}}</a>{%if not loop.last%}, {%else%} {%endif%}
                                {% endfor %}
                    </small>

                </div>
                {% endfor %}


            </div>

            {% if sidebar_settings.main_position == 2 %}

            <div class="col-md-4">
                {% include 'sidebar.html' %}

            </div>

            {% endif %}

        </div>

        <div class="row container">
            <div id="paginate container">

                {% for page_num in posts.iter_pages() %}



                    {% if page_num %}

                        {% if page_num == posts.page %}

                            <a class="btn btn-custom active" style="opacity:0.75;">{{page_num}}</a>


                        {% else %}

                            <a href="{{url_for('index', page=page_num)}}" class="btn btn-custom">{{page_num}}</a>


                        {% endif %}

                    {% else %}

                        ...


                    {% endif %}



                {% endfor %}

            </div>
        </div>


    </div>

</main>



{% endblock %}